# Nacos 测试环境
# 包含两个服务：无认证模式和带认证模式
services:
  # 无认证模式
  nacos-no-auth:
    image: nacos/nacos-server:v2.5.2
    container_name: nacos-no-auth
    environment:
      - MODE=standalone
      - NACOS_AUTH_ENABLE=false
    ports:
      - "8848:8848"
      - "9848:9848"

  # 带认证模式 (用户名: nacos, 密码: nacos)
  # 注意: Nacos 2.4.0+ 取消了默认密码，首次启动后需要通过 API 初始化管理员密码：
  #   curl -X POST 'http://localhost:8849/nacos/v1/auth/users/admin' -d 'password=nacos'
  nacos-with-auth:
    image: nacos/nacos-server:v2.5.2
    container_name: nacos-with-auth
    environment:
      - MODE=standalone
      - NACOS_AUTH_ENABLE=true
      - NACOS_AUTH_TOKEN=6tM0ZqW5uvWHJy8pzwNWQmj5kdsWgtaYoRkxW4ZuogE=
      - NACOS_AUTH_IDENTITY_KEY=talbot8b-nacos-key
      - NACOS_AUTH_IDENTITY_VALUE=talbot8b@2025!NacosServerIdentity
    ports:
      - "8849:8848"
      - "9849:9848"
