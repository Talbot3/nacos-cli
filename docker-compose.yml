# Nacos 测试环境
# 包含两个服务：无认证模式和带认证模式
version: "3.8"
services:
  # 无认证模式
  nacos-no-auth:
    image: docker.1ms.run/nacos/nacos-server:v2.5.2
    container_name: nacos-no-auth
    environment:
      - PREFER_HOST_MODE=hostname
      - MODE=standalone
      - SPRING_DATASOURCE_PLATFORM=embedded
      - NACOS_AUTH_ENABLE=false
      - NACOS_AUTH_TOKEN=SecretKey012345678901234567890123456789012345678901234567890123456789
      - NACOS_AUTH_IDENTITY_KEY=serverIdentity
      - NACOS_AUTH_IDENTITY_VALUE=security
    ports:
      - "8848:8848"
      - "9848:9848"
    restart: always

  # 带认证模式 (用户名: nacos, 密码: nacos)
  nacos-with-auth:
    image: docker.1ms.run/nacos/nacos-server:v2.5.2
    container_name: nacos-with-auth
    environment:
      - PREFER_HOST_MODE=hostname
      - MODE=standalone
      - SPRING_DATASOURCE_PLATFORM=embedded
      - NACOS_AUTH_ENABLE=true
      - NACOS_AUTH_TOKEN=SecretKey012345678901234567890123456789012345678901234567890123456789
      - NACOS_AUTH_IDENTITY_KEY=serverIdentity
      - NACOS_AUTH_IDENTITY_VALUE=security
    ports:
      - "8849:8848"
      - "9849:9848"
    restart: always
